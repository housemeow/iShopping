<ion-view title="friendName" ng-init="init()" left-buttons="backButton">
	<ion-content has-header="true" has-bouncing="true">
		<div class="item item-input-inset">
	    	<label class="item-input-wrapper">
	      		<input type="text" placeholder="請輸入訊息...." ng-model="chatMessage.text">
	    	</label>
	   		<button class="button button-energized" ng-click="onSendMessageClick()">
	      		傳送
	    	</button>
	    	<button class="button button-energized" ng-click="onLocationClick()">
	      		位置
	    	</button>
    	</div>
		<div class="list">
			<div ng-repeat="message in messages | reverseArray track by $index">
			    <div class="item higherItem" ng-class="message.senderPhone == hostPhone ? 'item-icon-right' : 'item-icon-left'" ng-click="onMessageClick(message)">
		                <div ng-class="message.senderPhone == hostPhone ? 'byMe' : ''">
		                	<i class="icon ion-ios7-chatbubble" ng-show="!hasLocation(message)"></i>
		                	<i class="icon ion-map" ng-show="hasLocation(message)"></i>
			                <h2 ng-class="message.hasRead && message.senderPhone == hostPhone ? 'energized' : ''">{{message.message.text | removeLocation}}</h2>
		                <p>{{message.time | fromNow}} {{message.hasRead && message.senderPhone == hostPhone ? '已讀' : ''}}</p>
				    </div>
	        	</div>
	        </div>
        </div>
    </ion-content>
</ion-view>